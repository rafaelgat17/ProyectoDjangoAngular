<div class="bloque-container">
  <h1>Ejercicio Bloque {{ bloqueId }}</h1>

  <div class="ejercicio-section">
    <h2>Ejercicio</h2>
    
    <div class="controles">
      <div class="control-group">
        <label for="rows">Filas (2-6):</label>
        <input type="number" id="rows" [(ngModel)]="rows" min="2" max="6" [disabled]="cargando">
      </div>
      
      <div class="control-group">
        <label for="cols">Columnas (2-6):</label>
        <input type="number" id="cols" [(ngModel)]="cols" min="2" max="6" [disabled]="cargando">
      </div>
    </div>
    
    <!-- ngModel: actualiza el valor de rows y cols cuando el usuario cambia el valor -->

    <button class="btn-generar" (click)="generarEjercicio()" 
            [disabled]="cargando">
      <span *ngIf="!cargando">Generar ejercicio ({{ rows }}x{{ cols }})</span>
      <span *ngIf="cargando">Generando...</span>
    </button>
    <!-- ngIf: si NO esta cargando "!cargando" saldra tal mensaje y cuando SI esta cargando saldra otro -->

    
    <div *ngIf="cargando" class="loading">
      <div class="spinner"></div>
      <p>Generando circuito {{ rows }}x{{ cols }}...</p>
    </div>




    <div *ngIf="circuitoGenerado && !cargando && circuitoGenerado.success" class="resultado">
      <h3>{{ circuitoGenerado.mensaje }}</h3>


      <div class="imagen-circuito">
        <h4>Circuito Generado:</h4>
        <app-circuit-viewer [circuitData]="circuitoGenerado.circuito"></app-circuit-viewer>
      </div>

    <div *ngIf="circuitoGenerado && !circuitoGenerado.success" class="error">
      <h3>Error</h3>
      <p>{{ circuitoGenerado.mensaje }}</p>
      <p class="error-detail">{{ circuitoGenerado.error }}</p>
    </div>
  </div>
</div>